spring:
  application:
    name: InkFlow
  datasource:
    url: ${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/inkflow}
    username: ${SPRING_DATASOURCE_USERNAME:inkflow}
    password: ${SPRING_DATASOURCE_PASSWORD:inkflow_pw}
  flyway:
    enabled: true
    locations: classpath:db/migration
  data:
    redis:
      host: ${SPRING_DATA_REDIS_HOST:localhost}
      port: ${SPRING_DATA_REDIS_PORT:6379}

inkflow:
  upload:
    session:
      ttl: ${INKFLOW_UPLOAD_SESSION_TTL:30m}
      min-chunk-size: ${INKFLOW_UPLOAD_MIN_CHUNK_SIZE:5242880}
      max-part-count: ${INKFLOW_UPLOAD_MAX_PART_COUNT:10000}
      storage-bucket: ${INKFLOW_UPLOAD_BUCKET:inkflow-uploads}
      storage-key-prefix: ${INKFLOW_UPLOAD_KEY_PREFIX:uploads/}
      redis:
        key-prefix: ${INKFLOW_UPLOAD_SESSION_KEY_PREFIX:upload:session:}
    validation:
      min-file-size: ${INKFLOW_UPLOAD_MIN_FILE_SIZE:1}
      max-file-size: ${INKFLOW_UPLOAD_MAX_FILE_SIZE:5368709120}
      allowed-extensions: ${INKFLOW_UPLOAD_ALLOWED_EXTENSIONS:jpg,jpeg,png,gif,webp,mp4,mov,pdf,epub}
    presign:
      base-url: ${INKFLOW_UPLOAD_PRESIGN_BASE_URL:http://localhost:9000}
    download:
      ttl: ${INKFLOW_UPLOAD_DOWNLOAD_TTL:10m}
    idempotency:
      ttl: ${INKFLOW_UPLOAD_IDEMPOTENCY_TTL:1h}
      redis:
        key-prefix: ${INKFLOW_UPLOAD_IDEMPOTENCY_KEY_PREFIX:upload:idempotency:}
